sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";var t;var n=false;var o;var g;return e.extend("proj.ext.controller.ObjectpageController",{override:{onInit:function(){debugger;var e=this.base.getExtensionAPI().getModel()},onAfterRendering:async function(e){debugger},editFlow:{onBeforeDiscard:async function(e){debugger;let t="discard";let n=e.context.getModel().bindContext(`/${t}(...)`);var o=window.location.href;const g=/idd=([a-fA-F0-9-]+)/;const a=o.match(g);if(a){o=a[1];console.log(o)}n.setParameter("d",o);await n.execute();const r=n.getBoundContext();var i=r.getValue()}},routing:{onBeforeBinding:async function(e){debugger;var t;await this.base.getView().getContent()[0].getFooter().mAggregations.content.getContent().forEach(e=>{var n;try{n=e.getText()}catch(e){n=null}if(n=="Create")t=e.sId});setTimeout(()=>{sap.ui.getCore().byId(t).setText("Send for Approval")},400);this.base.getView().getContent()[0].mAggregations.footer.mAggregations.content.mAggregations.content[4].mProperties.debugger},onAfterBinding:async function(e){debugger;var n;var o=null;var a=this.base.getView().getContent()[0].getSections()[1].mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[0].mAggregations.content.sId;await this.base.getView().getContent()[0].getSections()[1].mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[0].mAggregations.content.setUploadEnabled(false);var r=null;try{r=await this.getView().getContent()[0].mAggregations.footer.sId}catch(v){r=null}setTimeout(async()=>{sap.ui.getCore().byId(r).mAggregations.content.mAggregations.content.forEach(async e=>{if(e.getVisible()){if(e.getText()=="Discard Draft"){await sap.ui.getCore().byId(a).setUploadEnabled(true);await sap.ui.getCore().byId(a).mAggregations.items.forEach(async e=>{e.setEnabledRemove(true);e.setEnabledEdit(true)})}}})},400);debugger;const i=window.location.href;const s=/idd=([a-fA-F0-9-]+)/;const c=i.match(s);if(c){var d=c[1];console.log(d)}let l=this.base.getModel().getServiceUrl();l+=`lecture?$filter=idd eq ${d}`;try{function w(e){return new Promise(async n=>{await $.ajax({url:e,type:"GET",success:async function(e){debugger;var o=e.value[0].Status;if(o=="Approved"){debugger;t=true}else{t=false}n();console.log(e)}})})}let h=await w(l,g);this.base.getView().getContent()[0].mAggregations.headerTitle.mAggregations._actionsToolbar.mAggregations.content[4].setEnabled(t)}catch(p){debugger}let u="postattach";let f=e.getModel().bindContext(`/${u}(...)`);const m=11111;f.setParameter("p",m);await f.execute();const b=f.getBoundContext();var A=b.getValue()}}}})});
//# sourceMappingURL=ObjectpageController.controller.js.map